(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{286:function(e,t,a){e.exports=a(594)},291:function(e,t,a){},350:function(e,t,a){},588:function(e,t,a){},590:function(e,t,a){},594:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(9),o=a.n(l),i=(a(291),a(21)),s=a(31),c=a(27),u=a(30),d=a(11),p=a.n(d),m=a(15),f=(a(282),a(600)),h=(a(610),a(611)),y=a(612),g=a(601),b=a(613),x=a(595),v=a(10),E="@solidwm-token",w=function(){return localStorage.getItem(E)},k=function(e){localStorage.setItem(E,e)},C=a(608),D=a(609),O=a(597),j=a(598),S=C.a.Header,W=C.a.Content,T=C.a.Sider,q=C.a.Footer,I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.render=function(){return r.a.createElement(C.a,{style:{height:"100%",overflow:"auto"}},r.a.createElement(D.a,{title:r.a.createElement("span",{style:{fontWeight:"bolder",fontSize:"1.5em",color:"#618833"}},"SolidWM"),placement:a.state.placement,onClose:a.onClose,visible:a.state.visible,style:{padding:"24px 0px"}},a.props.menu,r.a.createElement("button",{style:{position:"absolute",bottom:"10px",width:"calc(100% - 44px)",padding:"8px",margin:"0px 22px",background:"none",border:"1px solid #333"}},"Sair")),r.a.createElement(T,{breakpoint:"lg",collapsedWidth:"0",width:250,onBreakpoint:function(e){},onCollapse:function(e,t){},style:{background:"#fff"}},r.a.createElement("div",{className:"logo"},"SolidWM"),a.props.menu,r.a.createElement("button",{style:{position:"absolute",bottom:"10px",width:"calc(100% - 44px)",padding:"8px",margin:"0px 22px",background:"none",border:"1px solid #333"}},"Sair")),r.a.createElement(C.a,null,r.a.createElement(S,{style:{background:"#8bc34a",padding:"0px 14px"}},r.a.createElement(O.a,{type:"flex",justify:"space-between",align:"middle",style:{height:"100%"}},r.a.createElement(j.a,{className:"hide"},r.a.createElement(v.a,{className:"trigger",type:"menu-fold",onClick:a.showDrawer})),r.a.createElement(j.a,null,r.a.createElement("h2",{style:{margin:"0px"}},a.props.titlePage)),r.a.createElement(j.a,null,r.a.createElement(O.a,{type:"flex",justify:"space-between",align:"middle",style:{height:"100%"}})))),r.a.createElement(W,{style:{padding:"20px 14px 45px 14px",boxSizing:"border-box",height:"100%",overflow:"auto"}},a.props.content),r.a.createElement(q,{style:{textAlign:"center",bottom:"0px",width:"100%",background:"#618833",padding:"10px "}},"SolidWM \xa92018 Created by Leo Jaimesson")))},a.state={visible:!1,placement:"left"},a}return Object(u.a)(t,e),t}(r.a.PureComponent),F=a(34),R=a(29),P=a(603),M=a(268),A=a(607),Y=a(131),B=a(599),L=a(14),K=a.n(L),N=(a(350),function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"board",style:{height:this.props.height,width:this.props.width}},this.props.children)}}]),t}(n.Component)),V=a(135),H=a(136),z=a(102),_=a(84),U=a.n(_),Z=function(){function e(t){Object(i.a)(this,e),this.url=t,this.request=U.a.create({baseURL:t,timeout:3e4,headers:{"Content-Type":"application/json"}}),this.request.interceptors.request.use(function(){var e=Object(m.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=w())&&(t.headers.Authorization="Bearer ".concat(a)),e.abrupt("return",t);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}return Object(R.a)(e,[{key:"getAllWasteByPeriod",value:function(){var e=Object(m.a)(p.a.mark(function e(t,a,n){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.get("/all-wastes?period=".concat(t,"&interval=").concat(a,"&idTypeSolidWaste=").concat(n||""));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getAllWasteByPeriodFull",value:function(){var e=Object(m.a)(p.a.mark(function e(t,a,n){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.get("/all-wastes-full?period=".concat(t,"&interval=").concat(a,"&idTypeSolidWaste=").concat(n||""));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getWastesByPeriod",value:function(){var e=Object(m.a)(p.a.mark(function e(t,a,n){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.get("/roda?startDate=".concat(t,"&endDate=").concat(a,"&idTypeSolidWaste=").concat(n||""));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getWastesByPeriodFull",value:function(){var e=Object(m.a)(p.a.mark(function e(t,a,n){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.get("/roda-full?startDate=".concat(t,"&endDate=").concat(a,"&idTypeSolidWaste=").concat(n||""));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getWasteByPeriod",value:function(){var e=Object(m.a)(p.a.mark(function e(t,a,n){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.get("/wastes?period=".concat(t,"&interval=").concat(a,"&idTypeSolidWaste=").concat(n||""));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()}]),e}(),J=P.a.Item,G=M.a.Option,Q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(){var e=Object(m.a)(p.a.mark(function e(t,n){var r,l,o,i,s,c,u,d;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=12;break}return e.next=3,a.dataClient.getAllWasteByPeriod(n.period,n.interval);case 3:r=e.sent,l=r.data.filter(function(e){return e.data>0}),o=l.reduce(function(e,t){return e+t.data},0),i=l.map(function(e){var t={};return t[e.name]=parseFloat(e.data.toFixed(2)),t.residuos=e.name,t}),s=l.map(function(e){return e.name}),c=l.map(function(e){return e.color}),u=l.map(function(e){return{name:e.name,color:e.color}}),d=l.map(function(e){var t={};return t.id=e.name,t.label=e.name,t.value=(e.data/o*100).toFixed(2),t}),a.setState({datas:i||[],colors:c,keys:s,pieData:d,totalKg:o,legend:u});case 12:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}())},a.dataClient=new Z("https://betatcc.herokuapp.com/datas"),a.state={datas:[],colors:[],keys:[],pieData:[],totalKg:0,timeLine:[],legend:[]},a}return Object(u.a)(t,e),Object(R.a)(t,[{key:"componentWillMount",value:function(){var e=Object(m.a)(p.a.mark(function e(){var t,a,n,r,l,o,i,s,c,u,d,m,f;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dataClient.getAllWasteByPeriod("WEEK",1);case 2:return t=e.sent,console.log(t),a=t.data.filter(function(e){return e.data>0}),n=new Date(2018,0,1,0,0,0),r=new Date(2018,11,31,11,59,59),e.next=9,this.dataClient.getWastesByPeriodFull(n,r);case 9:e.t0=function(e,t){return Object(F.a)(e).concat(Object(F.a)(t.data))},e.t1=[],e.t2=function(e){return e.collectionDate=new Date(e.collectionDate),e.collectionDate.setHours(0),e.collectionDate.setMinutes(0),e.collectionDate.setSeconds(0),e},l=e.sent.data.reduce(e.t0,e.t1).map(e.t2),o={},l.forEach(function(e){o[e.collectionDate]?o[e.collectionDate].value+=e.quantityCollected:o[e.collectionDate]={day:K()(e.collectionDate).format("YYYY-MM-DD"),value:e.quantityCollected}}),i=Object.keys(o).map(function(e){return o[e]}),s=a.reduce(function(e,t){return e+t.data},0),c=a.map(function(e){var t={};return t[e.name]=parseFloat(e.data.toFixed(2)),t.residuos=e.name,t}),u=a.map(function(e){return e.name}),d=a.map(function(e){return e.color}),m=a.map(function(e){var t={};return t.id=e.name,t.label=e.name,t.value=parseFloat((e.data/s*100).toFixed(2)),t}),f=a.map(function(e){return{name:e.name,color:e.color}}),this.setState({datas:c||[],colors:d,keys:u,pieData:m,totalKg:s,timeLine:i,legend:f});case 23:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=.5*window.innerHeight;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{type:"flex",justify:"space-between",align:"middle",gutter:24,style:{background:"white",margin:"0px",padding:"10px 0px"}},r.a.createElement(j.a,{xs:{span:24},lg:{span:24}},r.a.createElement(P.a,{layout:"inline",onSubmit:this.handleSubmit,style:{float:"right"}},r.a.createElement(J,null,r.a.createElement("span",null,"Periodo")),r.a.createElement(J,null,e("interval",{rules:[{required:!0,message:"O intervalo \xe9 obrigat\xf3rio!"}],initialValue:1})(r.a.createElement(A.a,{min:1}))),r.a.createElement(J,null,e("period",{rules:[{required:!0,message:"O periodo \xe9 obrigatorio!"}],initialValue:"WEEK"})(r.a.createElement(M.a,{style:{width:120}},r.a.createElement(G,{value:"DAY"},"Dia"),r.a.createElement(G,{value:"WEEK"},"Semana"),r.a.createElement(G,{value:"MONTH"},"M\xeas"),r.a.createElement(G,{value:"YEAR"},"Ano")))),r.a.createElement(J,null,r.a.createElement(Y.a,{type:"primary",htmlType:"submit"},"Consultar"))))),r.a.createElement(O.a,{gutter:24},r.a.createElement(j.a,{xs:{span:24},lg:{span:12}},r.a.createElement(N,null,r.a.createElement(B.a,{orientation:"left"}," ",r.a.createElement("h3",{style:{color:"#618833"}},"Res\xedduos coletados em Kg")),r.a.createElement("div",{style:{height:"".concat(t,"px")}},r.a.createElement(V.ResponsiveBar,{margin:{top:40,right:50,bottom:40,left:50},axisBottom:null,data:this.state.datas,indexBy:"residuos",keys:this.state.keys,colors:this.state.colors,padding:.2,labelTextColor:"#ffffff",labelSkipWidth:12,labelSkipHeight:12,labelFormat:function(e){return"".concat(e," Kg")},animate:!0,motionStiffness:90,motionDamping:15,tooltip:function(e){return"".concat(e.value," kg coletados")}})),r.a.createElement("div",null,this.state.legend.map(function(e){return r.a.createElement("div",{key:"bar-".concat(e.name),style:{display:"flex",alignItems:"center",marginRight:"20px",marginLeft:"10px"}},r.a.createElement("div",{style:{height:"10px",width:"10px",background:e.color}}),r.a.createElement("span",{style:{marginLeft:"5px"}},e.name))})))),r.a.createElement(j.a,{xs:{span:24},lg:{span:12}},r.a.createElement(N,null,r.a.createElement(B.a,{orientation:"left"},r.a.createElement("h3",{style:{color:"#618833"}},"Res\xedduos coletados em percentual")),r.a.createElement("div",{style:{height:"".concat(t,"px")}},r.a.createElement(H.ResponsivePie,{margin:{top:40,right:50,bottom:55,left:50},data:this.state.pieData,animate:!0,innerRadius:.6,padAngle:1,cornerRadius:3,colors:this.state.colors,radialLabelsLinkColor:"inherit",radialLabelsLinkStrokeWidth:3,radialLabelsTextColor:"inherit:darker(1.2)",slicesLabelsTextColor:"#ffffff",tooltip:function(e){return"".concat(e.value,"% do total total")},sliceLabel:function(e){return"".concat(e.value,"%")}})),r.a.createElement("div",null,this.state.legend.map(function(e){return r.a.createElement("div",{key:"pie-".concat(e.name),style:{display:"flex",alignItems:"center",marginRight:"20px",marginLeft:"10px"}},r.a.createElement("div",{style:{height:"10px",width:"10px",background:e.color}}),r.a.createElement("span",{style:{marginLeft:"5px"}},e.name))})))),this.state.timeLine&&r.a.createElement(j.a,{xs:{span:24},lg:{span:24}},r.a.createElement(N,null,r.a.createElement(B.a,{orientation:"left"},r.a.createElement("h3",{style:{color:"#618833"}},"Coletas efetuadas este ano - Kg")),r.a.createElement("div",{style:{height:"".concat(t,"px")}},r.a.createElement(z.ResponsiveCalendar,{margin:{top:50,right:10,bottom:0,left:50},from:"2018-01-01T03:00:00.000Z",to:"2018-12-31T03:00:00.000Z",data:this.state.timeLine,emptyColor:"#eeeeee",yearSpacing:40,monthBorderColor:"#ffffff",monthLegendOffset:10,dayBorderWidth:2,dayBorderColor:"#ffffff",legends:[{anchor:"bottom-right",direction:"row",translateY:-80,itemCount:4,itemWidth:34,itemHeight:36,itemDirection:"top-to-bottom"}],colors:["#c3e68d","#7cca71","#309b40","#23632d"]}))))))}}]),t}(r.a.PureComponent),$=P.a.create()(Q),X=a(53),ee=a(605),te=a(606),ae=a(602),ne=function(){function e(t){Object(i.a)(this,e),this.url=t,this.request=U.a.create({baseURL:t,timeout:3e4,headers:{"Content-Type":"application/json"}}),this.request.interceptors.request.use(function(){var e=Object(m.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=w())&&(t.headers.Authorization="Bearer ".concat(a)),e.abrupt("return",t);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}return Object(R.a)(e,[{key:"save",value:function(){var e=Object(m.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.post("/",JSON.stringify(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=Object(m.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.get("/");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(m.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.delete("?id=".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),re=function(e){var t=[];return e.recyclable&&t.push("recyclable"),e.reutilable&&t.push("reutilable"),t},le={toUsersListData:function(e){return e.map(function(e){return{key:e._id,name:e.firstName,email:e.email}})},toTypesSolidWasteData:function(e){return e.map(function(e){return{key:e._id,name:e.name,description:e.description,color:e.color,tags:re(e)}})},toSolidWasteCollectedData:function(e){return e.map(function(e){return{key:e._id,typeWasted:e.typeWasted.name,quantityCollected:e.quantityCollected,color:e.typeWasted.color,collectionDate:K()(new Date(e.collectionDate)).format("DD/MM/YYYY")}})},toTags:re},oe=P.a.Item,ie=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).showModal=function(){a.setState({modalVisible:!0})},a.handleOk=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(){var e=Object(m.a)(p.a.mark(function e(t,n){var r,l;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=8;break}return r={firstName:n.firstName,lastName:n.lastName,email:n.email,password:n.password},e.next=4,a.userClient.save(r);case 4:l=e.sent,a.setState({users:[{key:l.data._id,name:l.data.firstName,email:l.data.email}].concat(Object(F.a)(a.state.users))}),a.setState({modalVisible:!1}),a.props.form.resetFields();case 8:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}())},a.handleCancel=function(e){a.setState({modalVisible:!1})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.compareToFirstPassword=function(e,t,n){var r=a.props.form;t&&t!==r.getFieldValue("password")?n("As duas senhas precisam ser iguais!"):n()},a.validateToNextPassword=function(e,t,n){var r=a.props.form;t&&a.state.confirmDirty&&r.validateFields(["confirm"],{force:!0}),n()},a.render=function(){var e=a.props.form.getFieldDecorator,t={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:15}}},n=[{title:"Nome",dataIndex:"name",key:"name",width:300},{title:"Email",dataIndex:"email",key:"email",width:500},{title:"A\xe7\xe3o",key:"action",render:function(e,t){return r.a.createElement(Y.a,{type:"danger",icon:"delete",onClick:a.modalExcluir.bind(Object(X.a)(Object(X.a)(a)),e.key)})}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{type:"flex",justify:"space-between",align:"middle",style:{marginBottom:"20px"}},r.a.createElement(j.a,null,r.a.createElement(Y.a,{type:"primary",shape:"circle",icon:"plus",size:"large",style:{height:"50px",width:"50px",position:"fixed",bottom:"50px",right:"10px",zIndex:"999"},onClick:a.showModal}))),r.a.createElement(ee.a,{title:"Cadastrar Usu\xe1rio",visible:a.state.modalVisible,okText:"Cadastrar",onOk:a.handleOk,onCancel:a.handleCancel},r.a.createElement(P.a,null,r.a.createElement(oe,Object.assign({},t,{label:"Primeiro nome"}),e("firstName",{rules:[{required:!0,message:"Por favor digite o primeiro nome do usu\xe1rio"}]})(r.a.createElement(te.a,null))),r.a.createElement(oe,Object.assign({},t,{label:"\xdaltimo nome"}),e("lastName",{rules:[{required:!0,message:"Por favor digite o segundo nome do usu\xe1rio"}]})(r.a.createElement(te.a,null))),r.a.createElement(oe,Object.assign({},t,{label:"E-mail"}),e("email",{rules:[{type:"email",message:"Por favor digite um E-mail valido!"},{required:!0,message:"Por favor digite o E-mail do usu\xe1rio!"}]})(r.a.createElement(te.a,null))),r.a.createElement(oe,Object.assign({},t,{label:"Password"}),e("password",{rules:[{required:!0,message:"Por favor digite sua senha!"},{validator:a.validateToNextPassword}]})(r.a.createElement(te.a,{type:"password"}))),r.a.createElement(oe,Object.assign({},t,{label:"Confirm Password"}),e("confirm",{rules:[{required:!0,message:"Por favor confirme sua senha!"},{validator:a.compareToFirstPassword}]})(r.a.createElement(te.a,{type:"password",onBlur:a.handleConfirmBlur}))))),r.a.createElement(ae.a,{columns:n,bordered:!0,dataSource:a.state.users,scroll:window.innerWidth<=600?{x:800}:void 0,style:{background:"white"}}))},a.userClient=new ne("https://betatcc.herokuapp.com/users"),a.state={confirmDirty:!1,modalVisible:!1,visibleModalExcluir:!1,users:[]},a}return Object(u.a)(t,e),Object(R.a)(t,[{key:"componentWillMount",value:function(){var e=Object(m.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userClient.getAll();case 2:t=e.sent,this.setState({users:le.toUsersListData(t.data)});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"modalExcluir",value:function(e){var t=this;ee.a.error({title:"Deseja realmente excluir este usu\xe1rio?",cancelText:"Cancelar",okCancel:!0,okText:"Excluir",onOk:function(){var a=Object(m.a)(p.a.mark(function a(){var n;return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.userClient.remove(e);case 2:n=a.sent,t.setState({users:t.state.users.filter(function(e){return e.key!==n.data._id})});case 4:case"end":return a.stop()}},a,this)}));return function(){return a.apply(this,arguments)}}()})}}]),t}(r.a.PureComponent),se=P.a.create()(ie),ce=a(596),ue=a(193),de=function(){function e(t){Object(i.a)(this,e),this.url=t,this.request=U.a.create({baseURL:t,timeout:3e4,headers:{"Content-Type":"application/json"}}),this.request.interceptors.request.use(function(){var e=Object(m.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=w())&&(t.headers.Authorization="Bearer ".concat(a)),e.abrupt("return",t);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}return Object(R.a)(e,[{key:"save",value:function(){var e=Object(m.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.post("/",JSON.stringify(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=Object(m.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.get("/");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(m.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.delete("?id=".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),pe=P.a.Item,me=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).showModal=function(){a.setState({modalVisible:!0})},a.handleOk=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(){var e=Object(m.a)(p.a.mark(function e(t,n){var r,l;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=8;break}return console.log(n),r={name:n.name.toUpperCase(),description:n.description,recyclable:a.state.isRecyclable,reutilable:a.state.isReutilable,color:n.color},e.next=5,a.typeSolidWasteClient.save(r);case 5:l=e.sent,a.setState({typesSolidWaste:[{color:l.data.color,key:l.data._id,name:l.data.name,description:l.data.description,tags:le.toTags(l.data)}].concat(Object(F.a)(a.state.typesSolidWaste)),modalVisible:!1,isRecyclable:!1,isReutilable:!1}),a.props.form.resetFields();case 8:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}())},a.handleCancel=function(e){a.setState({modalVisible:!1,isRecyclable:!1,isReutilable:!1})},a.handleChangeCheckRecyclable=function(e){a.setState({isRecyclable:e.target.checked})},a.handleChangeCheckReutilable=function(e){a.setState({isReutilable:e.target.checked})},a.handleChangeTable=function(e,t,n){a.setState({filteredInfo:t})},a.render=function(){var e=a.props.form.getFieldDecorator,t={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:15}}},n=[{title:"",dataIndex:"color",key:"color",width:20,render:function(e){return r.a.createElement("div",{style:{width:"10px",height:"10px",background:e}})}},{title:"Nome",dataIndex:"name",key:"name"},{title:"Descri\xe7\xe3o",dataIndex:"description",key:"description"},{title:"",key:"tags",dataIndex:"tags",render:function(e){return r.a.createElement("span",null,e.map(function(e){return r.a.createElement(ce.a,{color:"blue",key:e},"recyclable"===(t=e)?"Recicl\xe1vel":"reutilable"===t?"Reutiliz\xe1vel":"");var t}))},filters:a.state.filters,filteredValue:a.state.filteredInfo.tags||null,onFilter:function(e,t){return t.tags.includes(e)}},{title:"A\xe7\xe3o",key:"action",render:function(e,t){return r.a.createElement(Y.a,{type:"danger",icon:"delete",onClick:a.modalExcluir.bind(Object(X.a)(Object(X.a)(a)),e.key)})}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{type:"flex",justify:"space-between",align:"middle",style:{marginBottom:"20px"}},r.a.createElement(j.a,null,r.a.createElement(Y.a,{type:"primary",shape:"circle",icon:"plus",size:"large",style:{height:"50px",width:"50px",position:"fixed",bottom:"50px",right:"10px",zIndex:"999"},onClick:a.showModal}))),r.a.createElement(ee.a,{title:"Cadastrar no tipo de res\xedduo",visible:a.state.modalVisible,okText:"Cadastrar",onOk:a.handleOk,onCancel:a.handleCancel},r.a.createElement(P.a,null,r.a.createElement(pe,Object.assign({},t,{label:"Nome"}),e("name",{rules:[{required:!0,message:"Por favor digite o nome do tipo de res\xedduo"}]})(r.a.createElement(te.a,null))),r.a.createElement(pe,Object.assign({},t,{label:"Descri\xe7\xe3o"}),e("description",{rules:[{required:!0,message:"Por favor digite a descri\xe7\xe3o do tipo de res\xedduo"}]})(r.a.createElement(te.a,null))),r.a.createElement(pe,Object.assign({},t,{label:"Cor"}),e("color",{rules:[{required:!0,message:"Por favor selecione uma cor para este tipo de res\xedduo"}]})(r.a.createElement(te.a,{type:"color",onChange:function(e){}}))),r.a.createElement(pe,{labelCol:{span:4},wrapperCol:{xs:{span:12,offset:0},sm:{span:12,offset:7}}},r.a.createElement(ue.a,{checked:a.state.isRecyclable,onClick:a.handleChangeCheckRecyclable},"Recicl\xe1vel"),r.a.createElement(ue.a,{checked:a.state.isReutilable,onClick:a.handleChangeCheckReutilable},"Reutiliz\xe1vel")))),r.a.createElement(ae.a,{columns:n,onChange:a.handleChangeTable,bordered:!0,dataSource:a.state.typesSolidWaste,scroll:window.innerWidth<=600?{x:900}:void 0,style:{background:"white"}}))},a.typeSolidWasteClient=new de("https://betatcc.herokuapp.com/types-solid-waste"),a.state={modalVisible:!1,visibleModalExcluir:!1,isRecyclable:!1,isReutilable:!1,typesSolidWaste:[],filters:[],filteredInfo:{}},a}return Object(u.a)(t,e),Object(R.a)(t,[{key:"componentWillMount",value:function(){var e=Object(m.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.typeSolidWasteClient.getAll();case 2:t=e.sent,this.setState({typesSolidWaste:t?le.toTypesSolidWasteData(t.data).reverse():[]});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"modalExcluir",value:function(e){var t=this;ee.a.error({title:"Deseja realmente excluir este tipo de residuo?",cancelText:"Cancelar",okCancel:!0,okText:"Excluir",onOk:function(){var a=Object(m.a)(p.a.mark(function a(){var n;return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.typeSolidWasteClient.remove(e);case 2:n=a.sent,t.setState({typesSolidWaste:t.state.typesSolidWaste.filter(function(e){return e.key!==n.data._id})});case 4:case"end":return a.stop()}},a,this)}));return function(){return a.apply(this,arguments)}}()})}}]),t}(r.a.PureComponent),fe=P.a.create()(me),he=a(604),ye=function(e){return e.map(function(e){return{text:e.name,value:e.name}})},ge=P.a.Item,be=M.a.Option,xe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).modalExcluir=function(e){ee.a.error({title:"Deseja realmente excluir esta coleta?",cancelText:"Cancelar",okCancel:!0,okText:"Excluir",onOk:function(){var t=Object(m.a)(p.a.mark(function t(){var n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.solidWasteCollectedClient.remove(e);case 2:n=t.sent,a.setState({solidsWasteCollected:a.state.solidsWasteCollected.filter(function(e){return e.key!==n.data._id})});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()})},a.showModal=function(){a.setState({modalVisible:!0})},a.handleOk=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(){var e=Object(m.a)(p.a.mark(function e(t,n){var r,l;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n),t){e.next=8;break}return r={typeWasted:n.typeWasted,quantityCollected:n.quantityCollected-0,collectionDate:n.collectionDate?n.collectionDate:null},e.next=5,a.solidWasteCollectedClient.save(r);case 5:l=e.sent,a.setState({solidsWasteCollected:[{key:l.data._id,typeWasted:l.data.typeWasted.name,color:l.data.typeWasted.color,collectionDate:K()(new Date(l.data.collectionDate)).format("DD/MM/YYYY"),quantityCollected:l.data.quantityCollected}].concat(Object(F.a)(a.state.solidsWasteCollected)),modalVisible:!1}),a.props.form.resetFields();case 8:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}())},a.handleCancel=function(e){a.setState({modalVisible:!1})},a.handleChangeSelect=function(e){a.setState({typeSelected:e})},a.handleChangeDate=function(e,t){a.setState({collectionDate:t})},a.handleChangeTable=function(e,t,n){a.setState({filteredInfo:t,sortedInfo:n})},a.render=function(){var e=a.props.form.getFieldDecorator,t={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:15}}},n=[{title:"",dataIndex:"color",key:"color",width:20,render:function(e){return r.a.createElement("div",{style:{width:"10px",height:"10px",background:e}})}},{title:"Data",dataIndex:"collectionDate",key:"collectionDate",width:150,sorter:function(e,t){var a=e.collectionDate.split("/"),n=t.collectionDate.split("/");return new Date(parseInt(a[2]),parseInt(a[1])-1,parseInt(a[0]))-new Date(parseInt(n[2]),parseInt(n[1])-1,parseInt(n[0]))},sortOrder:"collectionDate"===a.state.sortedInfo.columnKey&&a.state.sortedInfo.order},{title:"Total coletado",dataIndex:"quantityCollected",key:"quantityCollected",width:200,render:function(e,t){return"".concat(e," Kg")},sorter:function(e,t){return e.quantityCollected-t.quantityCollected},sortOrder:"quantityCollected"===a.state.sortedInfo.columnKey&&a.state.sortedInfo.order},{title:"Tipo",dataIndex:"typeWasted",key:"typeWasted",filters:a.state.filters,filteredValue:a.state.filteredInfo.typeWasted||null,onFilter:function(e,t){return t.typeWasted.includes(e)}},{title:"A\xe7\xe3o",key:"acti  on",render:function(e,t){return r.a.createElement(Y.a,{type:"danger",icon:"delete",onClick:a.modalExcluir.bind(Object(X.a)(Object(X.a)(a)),e.key)})}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{type:"flex",justify:"space-between",align:"middle",style:{marginBottom:"20px"}},r.a.createElement(j.a,null,r.a.createElement(Y.a,{type:"primary",shape:"circle",icon:"plus",size:"large",style:{height:"50px",width:"50px",position:"fixed",bottom:"50px",right:"10px",zIndex:"999"},onClick:a.showModal}))),r.a.createElement(ee.a,{title:"Cadastrar Coleta",visible:a.state.modalVisible,okText:"Cadastrar",cancelText:"Cancelar",onOk:a.handleOk,onCancel:a.handleCancel},r.a.createElement(P.a,null,r.a.createElement(ge,Object.assign({},t,{label:"Tipo de Res\xedduo"}),e("typeWasted",{rules:[{required:!0,message:"Por favor selecione o tipo de res\xedduo coletado"}]})(r.a.createElement(M.a,{placeholder:"Selecione o tipo de res\xedduo",onChange:a.handleChangeSelect},a.state.typesSolidWaste.map(function(e){return r.a.createElement(be,{value:e._id,key:e._id},e.name)})))),r.a.createElement(ge,Object.assign({},t,{label:"Quantidade em Kg"}),e("quantityCollected",{rules:[{required:!0,message:"Por favor informe a quantidade coletada"}]})(r.a.createElement(A.a,{min:0,style:{width:"100%"}}))),r.a.createElement(ge,Object.assign({},t,{label:"Data"}),e("collectionDate",{rules:[{required:!1}],initialValue:K()(new Date)})(r.a.createElement(he.a,null))))),r.a.createElement(ae.a,{columns:n,onChange:a.handleChangeTable,bordered:!0,dataSource:a.state.solidsWasteCollected,scroll:window.innerWidth<=600?{x:1e3}:void 0,style:{background:"white"}}))},a.solidWasteCollectedClient=new de("https://betatcc.herokuapp.com/solid-waste-collected"),a.typeSolidWasteClient=new de("https://betatcc.herokuapp.com/types-solid-waste"),a.state={modalVisible:!1,visibleModalExcluir:!1,isRecyclable:!1,isReutilable:!1,solidsWasteCollected:[],typesSolidWaste:[],filters:[],filteredInfo:{},sortedInfo:{}},a}return Object(u.a)(t,e),Object(R.a)(t,[{key:"componentWillMount",value:function(){var e=Object(m.a)(p.a.mark(function e(){var t,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.solidWasteCollectedClient.getAll();case 2:return t=e.sent,e.next=5,this.typeSolidWasteClient.getAll();case 5:a=e.sent,this.setState({solidsWasteCollected:le.toSolidWasteCollectedData(t.data).reverse(),typesSolidWaste:a.data,filters:ye(a.data)});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(r.a.PureComponent),ve=P.a.create()(xe),Ee=a(279),we=P.a.Item,ke=M.a.Option,Ce=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(){var e=Object(m.a)(p.a.mark(function e(t,n){var r,l,o,i,s,c,u,d,m,f,h,y,g,b,x,v,E,w,k,C,D,O,j,S,W,T,q,I,R,P,M,A,Y,B,L,N,V,H,z,_,U,Z,J,G,Q;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=85;break}if(r=n.type,l=n.endDate,o=n.startDate,""===r?a.setState({layoutAll:!0}):a.setState({layoutAll:!1}),(i=new Date(o)).setHours(0),i.setMinutes(0),i.setSeconds(0),(s=new Date(l)).setHours(23),s.setMinutes(59),s.setSeconds(59),!l||!o){e.next=48;break}if(""===r){e.next=30;break}return e.next=15,a.dataClient.getWastesByPeriodFull(i,s,r);case 15:c=e.sent,u=c.data[0].data.reduce(function(e,t){return e+t.quantityCollected},0),d=u,m=c.data[0].data.map(function(e){var t={};return t[c.data[0].name]=e.quantityCollected,t}),f=c.data[0].data.map(function(e){return e.collectionDate}),h={},c.data[0].data.forEach(function(e){e.collectionDate=new Date(e.collectionDate),e.collectionDate.setHours(0),e.collectionDate.setMinutes(0),e.collectionDate.setSeconds(0),h[e.collectionDate]?h[e.collectionDate].value+=e.quantityCollected:h[e.collectionDate]={day:K()(e.collectionDate).format("YYYY-MM-DD"),value:e.quantityCollected}}),y=Object.keys(h).map(function(e){return h[e]}),(g=[]).push(c.data[0].name),(b=[]).push(c.data[0].color),a.setState({streamDatas:m,streamKeys:g,streamColors:b,totalKg:d,timeLine:y,dates:f}),e.next=46;break;case 30:return e.next=32,a.dataClient.getWastesByPeriod(i,s);case 32:return x=e.sent,v=x.data.filter(function(e){return e.data>0}),E=v.reduce(function(e,t){return e+t.data},0),w=v.map(function(e){return{name:e.name,color:e.color}}),k=v.map(function(e){var t={};return t[e.name]=parseFloat(e.data.toFixed(2)),t.residuos=e.name,t}),C=v.map(function(e){return e.name}),D=v.map(function(e){return e.color}),O=v.map(function(e){var t={};return t.id=e.name,t.label=e.name,t.value=parseFloat((e.data/E*100).toFixed(2)),t}),e.next=42,a.dataClient.getWastesByPeriodFull(i,s);case 42:j=e.sent,S=[],j&&(W=j.data.reduce(function(e,t){return Object(F.a)(e).concat(Object(F.a)(t.data))},[]).map(function(e){return e.collectionDate=new Date(e.collectionDate),e.collectionDate.setHours(0),e.collectionDate.setMinutes(0),e.collectionDate.setSeconds(0),e}),T={},W.forEach(function(e){T[e.collectionDate]?T[e.collectionDate].value+=e.quantityCollected:T[e.collectionDate]={day:K()(e.collectionDate).format("YYYY-MM-DD"),value:e.quantityCollected}}),S=Object.keys(T).map(function(e){return T[e]})),a.setState({datas:k||[],colors:D,keys:C,pieData:O,totalKg:E,timeLine:S,legend:w});case 46:e.next=85;break;case 48:if(""===r){e.next=65;break}return e.next=51,a.dataClient.getAllWasteByPeriodFull(n.period,n.interval,r);case 51:q=e.sent,I=q.data[0].data.map(function(e){var t={};return t[q.data[0].name]=e.quantityCollected,t}),R=q.data[0].data.map(function(e){return e.collectionDate}),P=q.data[0].data.reduce(function(e,t){return e+t.quantityCollected},0),M={},q.data[0].data.forEach(function(e){e.collectionDate=new Date(e.collectionDate),e.collectionDate.setHours(0),e.collectionDate.setMinutes(0),e.collectionDate.setSeconds(0),M[e.collectionDate]?M[e.collectionDate].value+=e.quantityCollected:M[e.collectionDate]={day:K()(e.collectionDate).format("YYYY-MM-DD"),value:e.quantityCollected}}),A=Object.keys(M).map(function(e){return M[e]}),(Y=[]).push(q.data[0].name),(B=[]).push(q.data[0].color),a.setState({streamDatas:I,streamKeys:Y,streamColors:B,totalKg:P,timeLine:A,dates:R}),e.next=85;break;case 65:return e.next=67,a.dataClient.getAllWasteByPeriod(n.period,n.interval);case 67:return L=e.sent,N=L.data.filter(function(e){return e.data>0}),V=N.reduce(function(e,t){return e+t.data},0),H=N.map(function(e){return{name:e.name,color:e.color}}),z=N.map(function(e){var t={};return t[e.name]=parseFloat(e.data.toFixed(2)),t.residuos=e.name,t}),_=N.map(function(e){return e.name}),U=N.map(function(e){return e.color}),Z=N.map(function(e){var t={};return t.id=e.name,t.label=e.name,t.value=parseFloat((e.data/V*100).toFixed(2)),t}),e.next=77,a.dataClient.getAllWasteByPeriodFull(n.period,n.interval);case 77:e.t0=function(e,t){return Object(F.a)(e).concat(Object(F.a)(t.data))},e.t1=[],e.t2=function(e){return e.collectionDate=new Date(e.collectionDate),e.collectionDate.setHours(0),e.collectionDate.setMinutes(0),e.collectionDate.setSeconds(0),e},J=e.sent.data.reduce(e.t0,e.t1).map(e.t2),G={},J.forEach(function(e){G[e.collectionDate]?G[e.collectionDate].value+=e.quantityCollected:G[e.collectionDate]={day:K()(e.collectionDate).format("YYYY-MM-DD"),value:e.quantityCollected}}),Q=Object.keys(G).map(function(e){return G[e]}),a.setState({datas:z||[],colors:U,keys:_,pieData:Z,totalKg:V,timeLine:Q,legend:H});case 85:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}())},a.dataClient=new Z("https://betatcc.herokuapp.com/datas"),a.typeSolidWasteClient=new de("https://betatcc.herokuapp.com/types-solid-waste"),a.state={typesSolidWaste:[],layoutAll:!0,datas:[],colors:[],keys:[],pieData:[],totalKg:0,streamDatas:[],streamKeys:[],streamColors:[],legend:[],timeLine:[],dates:[]},a}return Object(u.a)(t,e),Object(R.a)(t,[{key:"componentWillMount",value:function(){var e=Object(m.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.typeSolidWasteClient.getAll();case 2:t=e.sent,this.setState({typesSolidWaste:t.data});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a={labelCol:{xs:{span:24},sm:{span:24}},wrapperCol:{xs:{span:24},sm:{span:24}}};return r.a.createElement(r.a.Fragment,null,!this.state.layoutAll&&r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{type:"flex",justify:"space-between",align:"middle",gutter:24,style:{background:"white",margin:"0px",padding:"10px 0px"}},r.a.createElement(j.a,{xs:{span:24},lg:{span:24}},r.a.createElement(P.a,{layout:"inline",onSubmit:this.handleSubmit},r.a.createElement(O.a,{type:"flex",justify:"space-between",align:"middle",gutter:24,style:{background:"white",margin:"0px",padding:"0px"}},r.a.createElement(j.a,{xs:{span:24},lg:{span:4},style:{padding:"0px"}},r.a.createElement(we,Object.assign({},a,{style:{width:"100%"}}),t("type",{rules:[{required:!1}],initialValue:""})(r.a.createElement(M.a,{style:{width:"100%"}},r.a.createElement(ke,{value:""},"Todos"),this.state.typesSolidWaste.map(function(e){return r.a.createElement(ke,{value:e._id,key:e._id},e.name)}))))),r.a.createElement(j.a,{xs:{span:24},lg:{span:14},style:{padding:"0px"}},r.a.createElement(O.a,{type:"flex",justify:"space-between",align:"middle",gutter:24,style:{background:"white",margin:"0px",padding:"10px 0px"}},r.a.createElement(j.a,{xs:{span:24},lg:{span:4},style:{padding:"0px"}},r.a.createElement(we,Object.assign({},a,{style:{width:"100%"}}),t("interval",{rules:[{required:!1,message:"O per\xedodo \xe9 obrigat\xf3rio!"}]})(r.a.createElement(A.a,{min:1,placeholder:"per\xedodo",style:{width:"100%"}})))),r.a.createElement(j.a,{xs:{span:24},lg:{span:4},style:{padding:"0px"}},r.a.createElement(we,Object.assign({},a,{style:{width:"100%"}}),t("period",{rules:[{required:!0,message:"O periodo \xe9 obrigatorio!"}],initialValue:"WEEK"})(r.a.createElement(M.a,{style:{width:"100%"}},r.a.createElement(ke,{value:"DAY"},"Dia"),r.a.createElement(ke,{value:"WEEK"},"Semana"),r.a.createElement(ke,{value:"MONTH"},"M\xeas"),r.a.createElement(ke,{value:"YEAR"},"Ano"))))),r.a.createElement(j.a,{xs:{span:24},lg:{span:1},style:{padding:"10px 0px"}}),r.a.createElement(j.a,{xs:{span:24},lg:{span:4},style:{padding:"0px"}},r.a.createElement(we,Object.assign({},a,{style:{width:"100%"}}),t("startDate",{rules:[{required:!1}]})(r.a.createElement(he.a,{style:{width:"100%"},placeholder:"Inicio"})))),r.a.createElement(j.a,{xs:{span:24},lg:{span:4},style:{padding:"0px"}},r.a.createElement(we,Object.assign({},a,{style:{width:"100%"}}),t("endDate",{rules:[{required:!1}]})(r.a.createElement(he.a,{style:{width:"100%"},placeholder:"fim"})))),r.a.createElement(j.a,{xs:{span:24},lg:{span:4},style:{padding:"0px"}},r.a.createElement(we,Object.assign({},a,{style:{width:"100%"}}),r.a.createElement(Y.a,{type:"primary",htmlType:"submit",style:{width:"100%"}},"Consultar"))))))))),r.a.createElement(O.a,{gutter:24},r.a.createElement(j.a,{xs:{span:24},lg:{span:24}},r.a.createElement(N,{height:.2*window.innerHeight},r.a.createElement(B.a,{orientation:"left"},r.a.createElement("h3",{style:{color:"#618833"}},"Peso total coletado")),r.a.createElement("div",{style:{fontSize:"2em",height:"25%",display:"flex",alignItems:"center",justifyContent:"center"}},this.state.totalKg.toFixed(2)," Kg"))),r.a.createElement(j.a,{xs:{span:24},lg:{span:24}},r.a.createElement(N,{height:.5*window.innerHeight},r.a.createElement(B.a,{orientation:"left"}," ",r.a.createElement("h3",{style:{color:"#618833"}},"Res\xedduos coletados em Kg")),r.a.createElement("div",{style:{height:"80%"}},r.a.createElement(Ee.ResponsiveStream,{margin:{top:60,right:80,bottom:60,left:80},keys:this.state.streamKeys,data:this.state.streamDatas,offsetType:"diverging",colors:this.state.streamColors,animate:!0,dotSize:8,dotBorderWidth:2,dotBorderColor:"inherit:brighter(0.7)",tooltipFormat:function(t){return"".concat(t.value.toFixed(2)," Kg - ").concat(K()(e.state.dates[t.index]).format("DD/MM/YYYY"))}})))),r.a.createElement(j.a,{xs:{span:24},lg:{span:24}},r.a.createElement(N,null,r.a.createElement(B.a,{orientation:"left"},r.a.createElement("h3",{style:{color:"#618833"}},"Res\xedduos coletados durante o ano")),r.a.createElement("div",{style:{height:"".concat(.45*window.innerHeight,"px")}},r.a.createElement(z.ResponsiveCalendar,{margin:{top:50,right:10,bottom:10,left:50},from:"2018-01-01T03:00:00.000Z",to:"2018-12-31T03:00:00.000Z",data:this.state.timeLine,emptyColor:"#eeeeee",yearSpacing:40,monthBorderColor:"#ffffff",monthLegendOffset:10,dayBorderWidth:2,dayBorderColor:"#ffffff",legends:[{anchor:"bottom-right",direction:"row",translateY:-40,itemCount:4,itemWidth:34,itemHeight:36,itemDirection:"top-to-bottom"}],colors:["#c3e68d","#7cca71","#309b40","#23632d"]})))))),this.state.layoutAll&&r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{type:"flex",justify:"space-between",align:"middle",gutter:24,style:{background:"white",margin:"0px",padding:"10px 0px"}},r.a.createElement(j.a,{xs:{span:24},lg:{span:24}},r.a.createElement(P.a,{layout:"inline",onSubmit:this.handleSubmit},r.a.createElement(O.a,{type:"flex",justify:"space-between",align:"middle",gutter:24,style:{background:"white",margin:"0px",padding:"0px"}},r.a.createElement(j.a,{xs:{span:24},lg:{span:4},style:{padding:"0px"}},r.a.createElement(we,Object.assign({},a,{style:{width:"100%"}}),t("type",{rules:[{required:!1}],initialValue:""})(r.a.createElement(M.a,{style:{width:"100%"}},r.a.createElement(ke,{value:""},"Todos"),this.state.typesSolidWaste.map(function(e){return r.a.createElement(ke,{value:e._id,key:e._id},e.name)}))))),r.a.createElement(j.a,{xs:{span:24},lg:{span:14},style:{padding:"0px"}},r.a.createElement(O.a,{type:"flex",justify:"space-between",align:"middle",gutter:24,style:{background:"white",margin:"0px",padding:"10px 0px"}},r.a.createElement(j.a,{xs:{span:24},lg:{span:4},style:{padding:"0px"}},r.a.createElement(we,Object.assign({},a,{style:{width:"100%"}}),t("interval",{rules:[{required:!1,message:"O intervalo \xe9 obrigat\xf3rio!"}]})(r.a.createElement(A.a,{min:1,placeholder:"intervalo",style:{width:"100%"}})))),r.a.createElement(j.a,{xs:{span:24},lg:{span:4},style:{padding:"0px"}},r.a.createElement(we,Object.assign({},a,{style:{width:"100%"}}),t("period",{rules:[{required:!0,message:"O periodo \xe9 obrigatorio!"}],initialValue:"WEEK"})(r.a.createElement(M.a,{style:{width:"100%"}},r.a.createElement(ke,{value:"DAY"},"Dia"),r.a.createElement(ke,{value:"WEEK"},"Semana"),r.a.createElement(ke,{value:"MONTH"},"M\xeas"),r.a.createElement(ke,{value:"YEAR"},"Ano"))))),r.a.createElement(j.a,{xs:{span:24},lg:{span:1},style:{padding:"10px 0px"}}),r.a.createElement(j.a,{xs:{span:24},lg:{span:4},style:{padding:"0px"}},r.a.createElement(we,Object.assign({},a,{style:{width:"100%"}}),t("startDate",{rules:[{required:!1}]})(r.a.createElement(he.a,{style:{width:"100%"},placeholder:"Inicio"})))),r.a.createElement(j.a,{xs:{span:24},lg:{span:4},style:{padding:"0px"}},r.a.createElement(we,Object.assign({},a,{style:{width:"100%"}}),t("endDate",{rules:[{required:!1}]})(r.a.createElement(he.a,{style:{width:"100%"},placeholder:"fim"})))),r.a.createElement(j.a,{xs:{span:24},lg:{span:4},style:{padding:"0px"}},r.a.createElement(we,Object.assign({},a,{style:{width:"100%"}}),r.a.createElement(Y.a,{type:"primary",htmlType:"submit",style:{width:"100%"}},"Consultar"))))))))),r.a.createElement(O.a,{gutter:24},r.a.createElement(j.a,{xs:{span:24},lg:{span:24}},r.a.createElement(N,{height:.2*window.innerHeight},r.a.createElement(B.a,{orientation:"left"},r.a.createElement("h3",{style:{color:"#618833"}},"Peso total coletado")),r.a.createElement("div",{style:{fontSize:"2em",height:"25%",display:"flex",alignItems:"center",justifyContent:"center"}},this.state.totalKg.toFixed(2)," Kg"))),r.a.createElement(j.a,{xs:{span:24},lg:{span:12}},r.a.createElement(N,null,r.a.createElement(B.a,{orientation:"left"}," ",r.a.createElement("h3",{style:{color:"#618833"}},"Res\xedduos coletados em Kg")),r.a.createElement("div",{style:{height:"".concat(.55*window.innerHeight,"px")}},r.a.createElement(V.ResponsiveBar,{margin:{top:12,right:50,bottom:12,left:50},axisBottom:null,data:this.state.datas,indexBy:"residuos",keys:this.state.keys,colors:this.state.colors,padding:.2,labelTextColor:"#ffffff",labelSkipWidth:16,labelSkipHeight:16,labelFormat:function(e){return"".concat(e," Kg")},tooltip:function(e){return"".concat(e.value," kg coletados")}})),r.a.createElement("div",{style:{marginTop:"20px"}},this.state.legend.map(function(e){return r.a.createElement("div",{style:{display:"flex",alignItems:"center",marginRight:"20px",marginLeft:"10px"}},r.a.createElement("div",{style:{height:"10px",width:"10px",background:e.color}}),r.a.createElement("span",{style:{marginLeft:"5px"}},e.name))})))),r.a.createElement(j.a,{xs:{span:24},lg:{span:12}},r.a.createElement(N,null,r.a.createElement(B.a,{orientation:"left"}," ",r.a.createElement("h3",{style:{color:"#618833"}},"Res\xedduos coletados em percentual")),r.a.createElement("div",{style:{height:"".concat(.55*window.innerHeight,"px")}},r.a.createElement(H.ResponsivePie,{margin:{top:10,right:50,bottom:30,left:50},data:this.state.pieData,animate:!0,innerRadius:.6,padAngle:1,cornerRadius:3,colors:this.state.colors,radialLabelsLinkColor:"inherit",radialLabelsLinkStrokeWidth:3,radialLabelsTextColor:"inherit:darker(1.2)",slicesLabelsTextColor:"#ffffff",tooltip:function(e){return"".concat(e.value,"% do total total")},sliceLabel:function(e){return"".concat(e.value,"%")}})),r.a.createElement("div",{style:{marginTop:"20px"}},this.state.legend.map(function(e){return r.a.createElement("div",{style:{display:"flex",alignItems:"center",marginRight:"20px",marginLeft:"10px"}},r.a.createElement("div",{style:{height:"10px",width:"10px",background:e.color}}),r.a.createElement("span",{style:{marginLeft:"5px"}},e.name))})))),r.a.createElement(j.a,{xs:{span:24},lg:{span:24}},r.a.createElement(N,null,r.a.createElement(B.a,{orientation:"left"},r.a.createElement("h3",{style:{color:"#618833"}},"Res\xedduos coletados durante o ano")),r.a.createElement("div",{style:{height:"".concat(.45*window.innerHeight,"px")}},r.a.createElement(z.ResponsiveCalendar,{margin:{top:50,right:10,bottom:10,left:50},from:"2018-01-01T03:00:00.000Z",to:"2018-12-31T03:00:00.000Z",data:this.state.timeLine,emptyColor:"#eeeeee",yearSpacing:40,monthBorderColor:"#ffffff",monthLegendOffset:10,dayBorderWidth:2,dayBorderColor:"#ffffff",legends:[{anchor:"bottom-right",direction:"row",translateY:-40,itemCount:4,itemWidth:34,itemHeight:36,itemDirection:"top-to-bottom"}],colors:["#c3e68d","#7cca71","#309b40","#23632d"]})))))))}}]),t}(r.a.PureComponent),De=P.a.create()(Ce),Oe=a(198),je=a.n(Oe),Se=a(280),We=a.n(Se),Te={toSolidWasteCollectedData:function(e){var t=[];return t.push(e.typeWasted),t.push(e.quantityCollected),t.push(e.collectionDate),t}},qe=function(e){return{content:[{text:"Coletas realizadas entre ".concat(e.startDate," - ").concat(e.endDate,"\n\n"),style:"header"},{text:"Total coletado: ".concat(e.total.toFixed(2)," Kg"),fontSize:14,bold:!0},{style:"table",table:{widths:[200,"*",100],body:[["Tipo de res\xedduo coletado","Total coletado","Data"]].concat(Object(F.a)(e.datas))}}],styles:{header:{fontSize:18,bold:!0},table:{margin:[0,5,0,15]}}}},Ie=P.a.Item,Fe=M.a.Option,Re=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(){var e=Object(m.a)(p.a.mark(function e(t,n){var r,l,o,i,s,c,u,d,m;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=18;break}if(r=n.type,l=n.endDate,o=n.startDate,!l||!o){e.next=18;break}return(i=new Date(o)).setHours(0),i.setMinutes(0),i.setSeconds(0),(s=new Date(l)).setHours(23),s.setMinutes(59),s.setSeconds(59),e.next=13,a.dataClient.getWastesByPeriodFull(i,s,r);case 13:c=e.sent,u=c.data.map(function(e){return le.toSolidWasteCollectedData(e.data)}).reduce(function(e,t){return Object(F.a)(e).concat(Object(F.a)(t))}),d=u.map(function(e){return Te.toSolidWasteCollectedData(e)}),m=d.reduce(function(e,t){return e+t[1]},0),a.setState({dataTables:u,dataDoc:{datas:d,total:m,startDate:o.format("DD/MM/YYYY"),endDate:l.format("DD/MM/YYYY")},total:m});case 18:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}())},a.handleChangeTable=function(e,t,n){a.setState({filteredInfo:t,sortedInfo:n})},a.render=function(){var e=a.props.form.getFieldDecorator,t=[{title:"",dataIndex:"color",key:"color",width:20,render:function(e){return r.a.createElement("div",{style:{width:"10px",height:"10px",background:e}})}},{title:"Data",dataIndex:"collectionDate",key:"collectionDate",width:150,sorter:function(e,t){var a=e.collectionDate.split("/"),n=t.collectionDate.split("/");return new Date(parseInt(a[2]),parseInt(a[1])-1,parseInt(a[0]))-new Date(parseInt(n[2]),parseInt(n[1])-1,parseInt(n[0]))},sortOrder:"collectionDate"===a.state.sortedInfo.columnKey&&a.state.sortedInfo.order},{title:"Total coletado",dataIndex:"quantityCollected",key:"quantityCollected",width:200,render:function(e,t){return"".concat(e," Kg")},sorter:function(e,t){return e.quantityCollected-t.quantityCollected},sortOrder:"quantityCollected"===a.state.sortedInfo.columnKey&&a.state.sortedInfo.order},{title:"Tipo",dataIndex:"typeWasted",key:"typeWasted"}],n={labelCol:{xs:{span:24},sm:{span:24}},wrapperCol:{xs:{span:24},sm:{span:24}}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{type:"flex",justify:"space-between",align:"middle",gutter:24,style:{background:"white",margin:"0px",padding:"10px 0px"}},r.a.createElement(j.a,{xs:{span:24},lg:{span:24}},r.a.createElement(P.a,{layout:"inline",onSubmit:a.handleSubmit},r.a.createElement(O.a,{type:"flex",justify:"space-between",align:"middle",gutter:24,style:{background:"white",margin:"0px",padding:"0px"}},r.a.createElement(j.a,{xs:{span:24},lg:{span:4},style:{padding:"0px"}},r.a.createElement(Ie,Object.assign({},n,{style:{width:"100%"}}),e("type",{rules:[{required:!1}],initialValue:""})(r.a.createElement(M.a,{style:{width:"100%"}},r.a.createElement(Fe,{value:""},"Todos"),a.state.typesSolidWaste.map(function(e){return r.a.createElement(Fe,{value:e._id,key:e._id},e.name)}))))),r.a.createElement(j.a,{xs:{span:24},lg:{span:10},style:{padding:"0px"}},r.a.createElement(O.a,{type:"flex",justify:"space-between",align:"middle",gutter:24,style:{background:"white",margin:"0px",padding:"10px 0px"}},r.a.createElement(j.a,{xs:{span:24},lg:{span:9},style:{padding:"0px"}},r.a.createElement(Ie,Object.assign({},n,{style:{width:"100%"}}),e("startDate",{rules:[{required:!1}]})(r.a.createElement(he.a,{style:{width:"100%"},placeholder:"Inicio"})))),r.a.createElement(j.a,{xs:{span:24},lg:{span:9},style:{padding:"0px"}},r.a.createElement(Ie,Object.assign({},n,{style:{width:"100%"}}),e("endDate",{rules:[{required:!1}]})(r.a.createElement(he.a,{style:{width:"100%"},placeholder:"fim"})))),r.a.createElement(j.a,{xs:{span:24},lg:{span:2},style:{padding:"0px"}},r.a.createElement(Ie,Object.assign({},n,{style:{width:"100%"}}),r.a.createElement(Y.a,{type:"primary",htmlType:"submit",style:{width:"100%"},icon:"search"}))))))))),a.state.dataTables.length>0&&r.a.createElement("div",null,r.a.createElement("div",{style:{padding:"10px",background:"white",margin:"16px 0px"}},r.a.createElement(O.a,{type:"flex",justify:"space-between",align:"middle",gutter:24,style:{background:"white",margin:"0px",padding:"10px 0px"}},r.a.createElement(j.a,{xs:{span:24},lg:{span:6},style:{padding:"0px"}},r.a.createElement("h3",{style:{margin:"0px"}},"Total Coletado ",a.state.dataTables.reduce(function(e,t){return e+t.quantityCollected},0).toFixed(2)," Kg")),r.a.createElement(j.a,{xs:{span:24},lg:{span:3},style:{padding:"0px"}},r.a.createElement(Y.a,{ype:"primary",htmlType:"button",style:{width:"100%"},icon:"file-pdf",onClick:function(){var e=We.a.pdfMake.vfs;je.a.vfs=e,je.a.createPdf(qe(a.state.dataDoc)).download("report.pdf")}},"PDF")))),r.a.createElement(ae.a,{columns:t,onChange:a.handleChangeTable,bordered:!0,dataSource:a.state.dataTables,scroll:window.innerWidth<=600?{x:700}:void 0,style:{background:"white",marginBottom:"20px"}})))},a.typeSolidWasteClient=new de("https://betatcc.herokuapp.com/types-solid-waste"),a.dataClient=new Z("https://betatcc.herokuapp.com/datas"),a.state={typesSolidWaste:[],dataTypesSolidWaste:[],dataTables:[],total:0,dataDoc:{},filteredInfo:{},sortedInfo:{}},a}return Object(u.a)(t,e),Object(R.a)(t,[{key:"componentWillMount",value:function(){var e=Object(m.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.typeSolidWasteClient.getAll();case 2:t=e.sent,this.setState({typesSolidWaste:t.data,dataTypesSolidWaste:t?le.toTypesSolidWasteData(t.data):[]});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(r.a.PureComponent),Pe=P.a.create()(Re),Me=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).handleSignIn=function(){var e=Object(m.a)(p.a.mark(function e(t){var n,r,l;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=a.state,r=n.email,l=n.password,r&&l)try{k("ok"),a.props.history.push("/home")}catch(o){a.setState({error:"Houve um problema com o login, verifique suas credenciais. T.T"})}else a.setState({error:"Preencha e-mail e senha para continuar!"});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.render=function(){return r.a.createElement(h.a,null,r.a.createElement(y.a,null,r.a.createElement(I,{menu:r.a.createElement(x.a,{mode:"inline",style:{zIndex:"999"}},r.a.createElement(x.a.Item,{key:"1",onClick:function(){a.setState({titlePage:"Vis\xe3o Geral"})}},r.a.createElement(v.a,{type:"home"}),r.a.createElement(g.a,{to:"/",className:"nav-text"},"Vis\xe3o Geral")),r.a.createElement(x.a.Item,{key:"2",onClick:function(){a.setState({titlePage:"Usu\xe1rios"})}},r.a.createElement(v.a,{type:"user"}),r.a.createElement(g.a,{to:"/usuarios",className:"nav-text"},"Usu\xe1rios")),r.a.createElement(x.a.Item,{key:"3",onClick:function(){a.setState({titlePage:"Tipos de Res\xedduos S\xf3lidos"})}},r.a.createElement(v.a,{type:"tag"}),r.a.createElement(g.a,{to:"/tipos-residuos-solidos",className:"nav-text"},"Tipos de Res\xedduos S\xf3lidos")),r.a.createElement(x.a.Item,{key:"4",onClick:function(){a.setState({titlePage:"Coletas"})}},r.a.createElement(v.a,{type:"delete"}),r.a.createElement(g.a,{to:"/coletas",className:"nav-text"},"Coletas")),r.a.createElement(x.a.Item,{key:"5",onClick:function(){a.setState({titlePage:"An\xe1lises"})}},r.a.createElement(v.a,{type:"line-chart"}),r.a.createElement(g.a,{to:"/analises",className:"nav-text"},"An\xe1lises")),r.a.createElement(x.a.Item,{key:"6",onClick:function(){a.setState({titlePage:"Relat\xf3rios"})}},r.a.createElement(v.a,{type:"file-text"}),r.a.createElement(g.a,{to:"/relatorios",className:"nav-text"},"Relat\xf3rios"))),content:r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{exact:!0,path:"/",component:Object(b.a)(function(){return r.a.createElement("div",{style:{height:"100vh",width:"100vw",zIndex:"99999999",background:"#ededed",position:"fixed",top:"0px",left:"0px",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("div",{style:{minWidth:"250px",background:"rgb(139, 195, 74)",borderRadius:"5px",boxShadow:"0px 0px 10px rgba(0, 0, 0, 0.2)",padding:"25px 10px",textAlign:"center"}},r.a.createElement("h3",{style:{color:"#fff",opacity:"0.8",fontFamily:"sans-serif",marginBottom:"10px",marginTop:"10px"}},"SolidWM"),r.a.createElement("input",{value:a.state.email,onChange:function(e){a.setState({email:e.target.value})},type:"text",style:{width:"100%",padding:"10px",border:"none",borderRadius:"3px",marginBottom:"10px"},placeholder:"Usu\xe1rio"}),r.a.createElement("input",{value:a.state.password,onChange:function(e){return a.setState({password:e.target.value})},type:"text",style:{width:"100%",padding:"10px",border:"none",borderRadius:"3px"},placeholder:"Senha"}),r.a.createElement("button",{onClick:a.handleSignIn,style:{width:"100%",padding:"10px",border:"none",borderRadius:"3px",background:"#4d74fc",color:"white",marginTop:"10px"}},"Entrar")))})}),r.a.createElement(f.a,{exact:!0,path:"/home",component:$}),r.a.createElement(f.a,{exact:!0,path:"/usuarios",component:se}),r.a.createElement(f.a,{exact:!0,path:"/tipos-residuos-solidos",component:fe}),r.a.createElement(f.a,{exact:!0,path:"/coletas",component:ve}),r.a.createElement(f.a,{exact:!0,path:"/analises",component:De}),r.a.createElement(f.a,{exact:!0,path:"/relatorios",component:Pe})),titlePage:a.state.titlePage})))},a.state={titlePage:"Vis\xe3o Geral"},a}return Object(u.a)(t,e),t}(n.Component),Ae=(a(552),a(554),a(556),a(558),a(560),a(562),a(564),a(566),a(568),a(570),a(572),a(574),a(576),a(578),a(580),a(582),a(584),a(586),a(588),a(590),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(l)))).render=function(){return r.a.createElement(Me,null)},a}return Object(u.a)(t,e),t}(n.Component)),Ye=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Be(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(Ae,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");Ye?(function(e,t){fetch(e).then(function(a){404===a.status||-1===a.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Be(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Be(t,e)})}}()}},[[286,2,1]]]);
//# sourceMappingURL=main.03a5e8a9.chunk.js.map